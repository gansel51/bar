<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="icon" href="images/favicon.ico" type="image/x-icon">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Seasonal Cocktails - The Tipsy Griffin</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
</head>

<body>
  <header id="main-header">
    <img src="images/logo-seal.png" alt="The Tipsy Griffin" class="seal-logo">
    <nav>
      <a href="index.html">Bar Menu</a>
      <a href="beer.html">Beer and Wine</a>
      <a href="classics.html">Classic Cocktails</a>
      <a href="seasonal.html" class="active">Seasonal Cocktails</a>
      <a href="spirits.html">Spirits List</a>
      <a href="homebrew.html">Homebrewing</a>
    </nav>
  </header>

  <main>
    <div class="container">
      <h1>Seasonal Cocktails</h1>

      <div class="search-container">
        <div class="search-bar">
          <input type="text" class="search-input" id="cocktail-search" placeholder="Search cocktails...">
          <button class="search-btn" aria-label="Search"><i class="fas fa-search"></i></button>
        </div>
      </div>

      <div class="inventory-controls">
        <label class="inventory-toggle">
          <input type="checkbox" id="inventory-mode-toggle">
          <span class="toggle-slider"></span>
          <span class="toggle-label">Inventory Mode</span>
        </label>
        <span class="inventory-mode-indicator">(click cocktails to toggle availability)</span>
      </div>

      <div class="filter-controls">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="whiskey">Whiskey</button>
        <button class="filter-btn" data-filter="gin">Gin</button>
        <button class="filter-btn" data-filter="rum">Rum</button>
        <button class="filter-btn" data-filter="tequila">Tequila</button>
        <button class="filter-btn availability-filter" id="hide-unavailable-btn">
          <i class="fas fa-eye-slash"></i> Hide Unavailable
        </button>
      </div>

      <section class="cocktail-list">

        <div class="cocktail" data-type="tequila-mezcal">
          <span class="icon">üç∏</span>
          <h2>Smoked Mezcal Sour</h2>
          <div class="cocktail-details">
            <div class="ingredients">
              <h3>Ingredients:</h3>
              <ul class="bullet-list">
                <li>1 oz Tequila Reposado</li>
                <li>1/2 oz Mezcal</li>
                <li>3/4 oz Lemon juice</li>
                <li>1/4 oz Pineapple juice</li>
                <li>1/2 oz Honey syrup</li>
                <li>Habanero shrub</li>
                <li>Egg white</li>
                <li>Orange bitters</li>
              </ul>
            </div>
            <div class="description">
              <p>This smoky cocktail is a twist on the classic whiskey sour, combining the flavors of mezcal and tequila
                with a
                hint of spice from habanero shrub and froth from the egg to refresh in the spring heat.</p>
            </div>
          </div>
          <br>
          <div class="cocktail-footer">
            <button class="btn btn-small view-recipe" data-cocktail="mezcal-sour">Full Recipe</button>
          </div>
        </div>

        <div class="cocktail" data-type="tequila-mezcal">
          <span class="icon">üç∏</span>
          <h2>Orange Margarita</h2>
          <div class="cocktail-details">
            <div class="ingredients">
              <h3>Ingredients:</h3>
              <ul class="bullet-list">
                <li>1.5 oz Tequila</li>
                <li>3/4 oz Cointreau</li>
                <li>3/4 oz Orange juice</li>
                <li>1/2 oz Lemon juice</li>
                <li>Lime juice</li>
                <li>1/2 oz Agave syrup</li>
                <li>Habanero shrub</li>
                <li>Angostura bitters</li>
                <li>Taj√≠n-rimmed glass</li>
              </ul>
            </div>
            <div class="description">
              <p>This refreshing margarita is a perfect summer drink, combining the flavors of tequila and orange with a
                hint of
                spice from Taj√≠n and habanero shrub.</p>
            </div>
          </div>
          <br>
          <div class="cocktail-footer">
            <button class="btn btn-small view-recipe" data-cocktail="orange-margarita">Full Recipe</button>
          </div>
        </div>

        <div class="cocktail" data-type="gin">
          <span class="icon">üç∏</span>
          <h2>Blackberry Bramble</h2>
          <div class="cocktail-details">
            <div class="ingredients">
              <h3>Ingredients:</h3>
              <ul class="bullet-list">
                <li>2 oz Gin</li>
                <li>3/4 oz Lemon juice</li>
                <li>1/2 oz Honey syrup</li>
                <li>1/4 oz Chambord</li>
                <li>Blackberry shrub</li>
                <li>Golden bitters</li>
              </ul>
            </div>
            <div class="description">
              <p>This herbal cocktail combines the flavors of gin and blackberries with a hint of sweetness from honey
                syrup and
                Chambord.</p>
            </div>
          </div>
          <br>
          <div class="cocktail-footer">
            <button class="btn btn-small view-recipe" data-cocktail="blackberry-bramble">Full Recipe</button>
          </div>
        </div>

        <div class="cocktail" data-type="gin">
          <span class="icon">üç∏</span>
          <h2>Ginger Gin Fizz</h2>
          <div class="cocktail-details">
            <div class="ingredients">
              <h3>Ingredients:</h3>
              <ul class="bullet-list">
                <li>2 oz Gin</li>
                <li>1/2 oz Lime juice</li>
                <li>Ginger soda</li>
                <li>Angostura bitters</li>
              </ul>
            </div>
            <div class="description">
              <p>This fizzy refresher mixes gin and ginger for a light, sweet, bubbly drink.</p>
            </div>
          </div>
          <br>
          <div class="cocktail-footer">
            <button class="btn btn-small view-recipe" data-cocktail="ginger-gin-fizz">Full Recipe</button>
          </div>
        </div>

        <div class="cocktail" data-type="whiskey">
          <span class="icon">ü•É</span>
          <h2>Blackberry Sour</h2>
          <div class="cocktail-details">
            <div class="ingredients">
              <h3>Ingredients:</h3>
              <ul class="bullet-list">
                <li>1.5 oz Bourbon</li>
                <li>3/4 oz Honey syrup</li>
                <li>3/4 oz Lemon juice</li>
                <li>1/4 oz Chambord (float)</li>
                <li>Egg white</li>
                <li>Blackberry shrub</li>
                <li>Angostura bitters</li>
              </ul>
            </div>
            <div class="description">
              <p>This blackberry whiskey sour takes the classic cocktail to the next level with the addition of muddled
                blackberries and a float of Chambord.</p>
            </div>
          </div>
          <br>
          <div class="cocktail-footer">
            <button class="btn btn-small view-recipe" data-cocktail="blackberry-whiskey-sour">Full Recipe</button>
          </div>
        </div>

        <div class="cocktail" data-type="rum">
          <span class="icon">üçπ</span>
          <h2>Honeysuckle</h2>
          <div class="cocktail-details">
            <div class="ingredients">
              <h3>Ingredients:</h3>
              <ul class="bullet-list">
                <li>2 oz White rum</li>
                <li>3/4 oz Honey syrup</li>
                <li>3/4 oz Lime juice</li>
                <li>Lime wedge</li>
              </ul>
            </div>
            <div class="description">
              <p>This summer cocktail combines the flavors of white rum and honey syrup with a hint of lime for a light,
                sweet
                drink.</p>
            </div>
          </div>
          <br>
          <div class="cocktail-footer">
            <button class="btn btn-small view-recipe" data-cocktail="honeysuckle">Full Recipe</button>
          </div>
        </div>

      </section>
    </div>
  </main>

  <!-- Recipe Modal -->
  <div class="modal-overlay" id="recipe-modal">
    <div class="modal-content">
      <button class="modal-close" id="close-modal">&times;</button>
      <div id="modal-content"></div>
    </div>
  </div>

  <footer>
    <div class="container">
      <div class="footer-content">
        <p>&copy; 2025 Griffin Ansel | The Tipsy Griffin</p>
        <p class="disclaimer">Please drink responsibly.</p>
      </div>
    </div>
  </footer>

  <script>
    // Header scroll effect
    window.addEventListener('scroll', function () {
      const header = document.getElementById('main-header');
      if (window.scrollY > 50) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
    });

    // DOM content loaded event
    document.addEventListener('DOMContentLoaded', function () {
      const filterButtons = document.querySelectorAll('.filter-btn:not(.availability-filter)');
      const cocktails = document.querySelectorAll('.cocktail');
      const searchInput = document.getElementById('cocktail-search');
      const recipeButtons = document.querySelectorAll('.view-recipe');
      const modal = document.getElementById('recipe-modal');
      const closeModal = document.getElementById('close-modal');
      const modalContent = document.getElementById('modal-content');
      const inventoryModeToggle = document.getElementById('inventory-mode-toggle');
      const hideUnavailableBtn = document.getElementById('hide-unavailable-btn');

      // localStorage key for cocktail inventory
      const COCKTAIL_INVENTORY_KEY = 'tipsy-griffin-cocktail-inventory';

      // Load inventory from localStorage
      function loadInventory() {
        const stored = localStorage.getItem(COCKTAIL_INVENTORY_KEY);
        return stored ? JSON.parse(stored) : {};
      }

      // Save inventory to localStorage
      function saveInventory(inventory) {
        localStorage.setItem(COCKTAIL_INVENTORY_KEY, JSON.stringify(inventory));
      }

      // Get cocktail ID from the data-cocktail attribute on the recipe button
      function getCocktailId(cocktailDiv) {
        const btn = cocktailDiv.querySelector('.view-recipe');
        return btn ? btn.getAttribute('data-cocktail') : cocktailDiv.querySelector('h2').textContent.toLowerCase().replace(/[^a-z0-9]/g, '-');
      }

      // Apply availability classes based on stored inventory
      function applyInventoryState() {
        const inventory = loadInventory();
        cocktails.forEach(cocktail => {
          const id = getCocktailId(cocktail);
          if (inventory[id] === false) {
            cocktail.classList.add('unavailable');
          } else {
            cocktail.classList.remove('unavailable');
          }
        });
      }

      // Toggle cocktail availability
      function toggleCocktailAvailability(cocktail) {
        const inventory = loadInventory();
        const id = getCocktailId(cocktail);

        if (inventory[id] === false) {
          delete inventory[id];
          cocktail.classList.remove('unavailable');
        } else {
          inventory[id] = false;
          cocktail.classList.add('unavailable');
        }

        saveInventory(inventory);
      }

      // Initialize inventory state on page load
      applyInventoryState();

      // Inventory mode toggle
      if (inventoryModeToggle) {
        inventoryModeToggle.addEventListener('change', function() {
          if (this.checked) {
            document.body.classList.add('inventory-mode');
          } else {
            document.body.classList.remove('inventory-mode');
          }
        });
      }

      // Click handler for cocktails (only in inventory mode)
      cocktails.forEach(cocktail => {
        cocktail.addEventListener('click', function(e) {
          if (document.body.classList.contains('inventory-mode')) {
            if (!e.target.closest('.view-recipe')) {
              e.preventDefault();
              toggleCocktailAvailability(cocktail);
            }
          }
        });
      });

      // Track whether to hide unavailable
      let hideUnavailable = false;

      // Hide/Show unavailable toggle
      if (hideUnavailableBtn) {
        hideUnavailableBtn.addEventListener('click', function() {
          hideUnavailable = !hideUnavailable;
          this.classList.toggle('active', hideUnavailable);

          if (hideUnavailable) {
            this.innerHTML = '<i class="fas fa-eye"></i> Show Unavailable';
          } else {
            this.innerHTML = '<i class="fas fa-eye-slash"></i> Hide Unavailable';
          }

          applyFilters();
        });
      }

      // Combined filter function
      function applyFilters() {
        const activeFilter = document.querySelector('.filter-btn.active:not(.availability-filter)');
        const filter = activeFilter ? activeFilter.getAttribute('data-filter') : 'all';
        const searchTerm = searchInput ? searchInput.value.toLowerCase() : '';

        cocktails.forEach(cocktail => {
          const matchesType = filter === 'all' || cocktail.getAttribute('data-type').includes(filter);
          const cocktailName = cocktail.querySelector('h2').textContent.toLowerCase();
          const cocktailIngredients = cocktail.querySelector('.ingredients').textContent.toLowerCase();
          const matchesSearch = !searchTerm || cocktailName.includes(searchTerm) || cocktailIngredients.includes(searchTerm);
          const isUnavailable = cocktail.classList.contains('unavailable');
          const matchesAvailability = !hideUnavailable || !isUnavailable;

          cocktail.style.display = (matchesType && matchesSearch && matchesAvailability) ? 'block' : 'none';
        });
      }

      // Filter buttons click event
      filterButtons.forEach(button => {
        button.addEventListener('click', () => {
          filterButtons.forEach(btn => btn.classList.remove('active'));
          button.classList.add('active');
          applyFilters();
        });
      });

      // Search functionality
      if (searchInput) {
        searchInput.addEventListener('input', applyFilters);
      }

      // Load recipes from JSON file
      let recipes = {};
      fetch('assets/recipes.json')
        .then(response => response.json())
        .then(data => {
          recipes = data;
        })
        .catch(error => {
          console.error('Error loading recipes:', error);
          // Fallback in case the JSON file fails to load
          recipes = {
            'recipe-not-found': {
              name: 'Recipe Not Found',
              ingredients: ['Unable to load recipe data'],
              instructions: ['Please try again later'],
              description: 'We\'re having trouble accessing our recipe database.'
            }
          };
        });

      // Open modal with recipe
      recipeButtons.forEach(button => {
        button.addEventListener('click', () => {
          const recipeId = button.getAttribute('data-cocktail');

          // Show loading indicator first
          modalContent.innerHTML = `
            <div class="loading">
              <div class="loading-spinner"></div>
              <p>Loading recipe...</p>
            </div>
          `;

          // Show modal right away with loading spinner
          modal.classList.add('active');

          // Wait a moment to ensure JSON is loaded
          setTimeout(() => {
            const recipe = recipes[recipeId] || {
              name: 'Recipe Coming Soon',
              ingredients: ['Check back later for the complete recipe!'],
              instructions: ['This recipe is currently being perfected.'],
              description: 'We\'re still fine-tuning this delicious cocktail. Check back soon!'
            };

            // Populate modal content
            modalContent.innerHTML = `
  <h2>${recipe.name}</h2>
  <div class="recipe-content">
    <div class="recipe-description">${recipe.description}</div>
    <div class="recipe-details">
      <h3>Ingredients:</h3>
      <ul class="ingredients-list bullet-list">
        ${recipe.ingredients.map(ingredient => `<li>${ingredient}</li>`).join('')}
      </ul>
      <h3>Instructions:</h3>
      <ol class="instructions-list">
        ${recipe.instructions.map(step => `<li>${step}</li>`).join('')}
      </ol>
    </div>
  </div>
`;
          }, 300);
        });
      });

      // Close modal
      if (closeModal) {
        closeModal.addEventListener('click', () => {
          modal.classList.remove('active');
        });
      }

      // Close modal when clicking outside content
      if (modal) {
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            modal.classList.remove('active');
          }
        });
      }
    });
  </script>
</body>

</html>